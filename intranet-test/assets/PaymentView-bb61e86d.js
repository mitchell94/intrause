import{r,_ as C,u as T,k,e as R,o as p,c as v,a as t,w as g,b as a,i as V,f as L,v as M,l as U,t as s,F as x,g as j,h as F,j as B,n as G,p as X,d as z}from"./index-fc355224.js";import{u as H}from"./program-f22f9f31.js";function J(){const d=new Date;let l=d.getDate(),c=d.getMonth()+1,m=d.getFullYear();return l<10&&(l="0"+l),c<10&&(c="0"+c),{currentDate:r(l+"-"+c+"-"+m)}}const e=d=>(X("data-v-480edf38"),d=d(),z(),d),Y=e(()=>t("div",{class:"row"},[t("div",{class:"col d-flex align-items-center page-bar"},[t("span",{class:"page-title"},"Reporte de pagos")])],-1)),$={class:"row"},q={class:"col mt-3 mb-3"},K={class:"card shadow-sm top-random"},Q={class:"card-header d-flex justify-content-between text-random"},W=e(()=>t("span",{class:"h6"},"CONCEPTOS DE PAGO",-1)),Z=e(()=>t("span",{class:"fa-solid fa-print"},null,-1)),tt={class:"card-body"},et={class:"row"},st=e(()=>t("div",{class:"col-auto"},[t("span",{class:"form-label fw-bold text-secondary"},"Buscar:")],-1)),at={class:"col"},ot={key:0,class:"row"},nt={class:"col mb-3"},dt={class:"print-page",id:"to-print-payments"},lt={class:"content-page container-fluid"},ct=B('<div class="row" data-v-480edf38><div class="col-auto px-0" data-v-480edf38><div class="image-unsm" data-v-480edf38></div></div><div class="col px-0" data-v-480edf38><div class="d-flex justify-content-center unsm-name" data-v-480edf38> UNIVERSIDAD NACIONAL DE SAN MARTÍN </div><div class="d-flex justify-content-center fcs-name" data-v-480edf38> FACULTAD DE CIENCIAS DE LA SALUD </div><div class="d-flex justify-content-center use-name" data-v-480edf38> UNIDAD DE SEGUNDA ESPECIALIDAD </div></div><div class="col-auto px-0" data-v-480edf38><div class="image-fcs" data-v-480edf38></div></div></div><div class="row" data-v-480edf38><div class="col pt-2 pb-0 print-title" data-v-480edf38>CONCEPTOS DE PAGO</div></div>',2),it={class:"row"},rt={class:"col px-0"},ut={class:"mt-3"},_t=e(()=>t("td",{class:"td-bold"},"PROGRAMA",-1)),pt=e(()=>t("td",{class:"td-bold px-2"},":",-1)),vt={class:"td-normal"},mt=e(()=>t("td",{class:"td-bold"},"ESTUDIANTE",-1)),ht=e(()=>t("td",{class:"td-bold px-2"},":",-1)),ft={class:"td-normal"},yt=e(()=>t("td",{class:"td-bold"},"CÓD/DNI",-1)),Dt=e(()=>t("td",{class:"td-bold px-2"},":",-1)),bt={class:"td-normal"},gt={class:"row"},xt={class:"col d-flex justify-content-between mt-3 px-0"},Pt={class:"row"},Nt={class:"col mt-1 p-0"},Ot={class:"table table-sm table-bordered"},wt=e(()=>t("thead",{class:"table-dark"},[t("tr",null,[t("th",null,"#"),t("th",null,"CONCEPTO"),t("th",null,"MONTO"),t("th",null,"PERIODO"),t("th",null,"ESTADO")])],-1)),Et=e(()=>t("span",{class:"watermark"},"SOLO LECTURA",-1)),St={__name:"PaymentView",setup(d){const l="https://asefcs.unsm.edu.pe/api",c=JSON.parse(localStorage.getItem("use")),m=localStorage.getItem("student"),{personName:y,personDocument:P}=T(l,c),{programName:N}=H(l,c,m),{currentDate:O}=J();let h=r([]),D=r(0),b=r(0);(async()=>{let i=await(await fetch(l+"/intranet/student-payment",{headers:{"X-Accesss-Token":c,"X-Student-Id":m}})).json();h.value=i,D.value=i.filter(o=>o.type==="Pagado").reduce((o,_)=>o+Number(_.amount),0),b.value=i.filter(o=>o.type==="Pendiente").reduce((o,_)=>o+Number(_.amount),0)})();const w=["concept","amount","process","type"],f=r(""),E=r([{text:"CONCEPTO",value:"concept"},{text:"MONTO",value:"amount"},{text:"PERIODO",value:"process"},{text:"ESTADO",value:"type"}]);let u=r(!1),S={id:"to-print-payments",openCallback(){u.value=!1}};return(A,i)=>{const o=k("EasyDataTable"),_=R("print");return p(),v(x,null,[Y,t("div",$,[t("div",q,[t("div",K,[t("div",Q,[W,g((p(),v("span",{class:"cursor-pt",onClick:i[0]||(i[0]=n=>V(u)?u.value=!0:u=!0)},[Z,L(" IMPRIMIR ")])),[[_,a(S)]])]),t("div",tt,[t("div",et,[st,t("div",at,[g(t("input",{type:"text",class:"form-control form-control-sm mb-2","onUpdate:modelValue":i[1]||(i[1]=n=>f.value=n)},null,512),[[M,f.value]])])]),U(o,{headers:E.value,items:a(h),"search-field":w,"search-value":f.value,"rows-per-page":10,"show-index":"",alternating:"","buttons-pagination":""},null,8,["headers","items","search-value"])])])])]),a(u)?(p(),v("div",ot,[t("div",nt,[t("div",dt,[t("div",lt,[ct,t("div",it,[t("div",rt,[t("div",ut,[t("table",null,[t("tbody",null,[t("tr",null,[_t,pt,t("td",vt,s(a(N)),1)]),t("tr",null,[mt,ht,t("td",ft,s(a(y)),1)]),t("tr",null,[yt,Dt,t("td",bt,s(a(P)),1)])])])])])]),t("div",gt,[t("div",xt,[t("span",null,"T. Pagado: S/ "+s(a(D)),1),t("span",null,"T. Pendiente: S/ "+s(a(b)),1),t("span",null,"Fecha: "+s(a(O)),1)])]),t("div",Pt,[t("div",Nt,[t("table",Ot,[wt,t("tbody",null,[(p(!0),v(x,null,j(a(h),(n,I)=>(p(),v("tr",{key:n.id},[t("td",null,s(I+1),1),t("td",null,s(n.concept),1),t("td",null,s(n.amount),1),t("td",null,s(n.process),1),t("td",{class:G({"text-danger":n.type=="Pendiente"})},s(n.type),3)]))),128))])])])])]),Et])])])):F("",!0)],64)}}},Tt=C(St,[["__scopeId","data-v-480edf38"]]);export{Tt as default};
