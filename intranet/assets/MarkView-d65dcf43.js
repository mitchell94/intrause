import{E as et}from"./jspdf.plugin.autotable-e0d23861.js";import{_ as st,u as ot,r as _,o as h,c as m,a as e,b as i,e as at,t as c,F as f,f as M,n as nt,p as lt,d as it,l as ct,g as dt}from"./index-e7adcaa5.js";import{u as rt}from"./program-2d27e2f2.js";const l=b=>(lt("data-v-67cd1da1"),b=b(),it(),b),ht=l(()=>e("div",{class:"row"},[e("div",{class:"col d-flex align-items-center page-bar"},[e("span",{class:"page-title"},"Reporte de calificaciones")])],-1)),mt={class:"row"},_t={class:"col mt-3 mb-3"},pt={class:"card shadow-sm top-random"},ut={class:"card-header d-flex justify-content-between text-random"},gt=l(()=>e("span",{class:"h6"},"RÉCORD ACADÉMICO",-1)),Ct=l(()=>e("span",{class:"fa-solid fa-print"},null,-1)),xt={class:"card-body"},bt={class:"mb-2 fw-bold text-random"},St={class:"row"},vt=l(()=>e("span",{style:{"font-weight":"bold","font-size":"0.8em","margin-right":"35px"}},"SEMESTRE",-1)),Ot={style:{"font-size":"0.8em"}},Et={class:"table table-sm table-bordered"},At=l(()=>e("thead",{class:"table-dark"},[e("tr",null,[e("th",{style:{width:"85px"}},"CÓDIGO"),e("th",null,"CURSO"),e("th",{style:{width:"20px"}},"CL"),e("th",{style:{width:"20px"}},"CR"),e("th",{style:{width:"20px"}},"TC"),e("th",{style:{width:"35px"}},"NOTA")])],-1)),Rt={key:0},yt={key:1},Tt={key:0},ft={key:1},Nt={class:"mb-2"},Dt={class:"row"},It={class:"col"},Ft={class:"mt-3"},kt=l(()=>e("td",{class:"td-bold"},"TOTAL CURSOS",-1)),Ut=l(()=>e("td",{class:"td-bold px-2"},":",-1)),wt={class:"td-normal"},Lt=l(()=>e("td",{class:"td-bold"},"TOTAL CRÉDITOS",-1)),Pt=l(()=>e("td",{class:"td-bold px-2"},":",-1)),zt={class:"td-normal"},Mt=l(()=>e("td",{class:"td-bold"},"PROMEDIO GENEREAL",-1)),Wt=l(()=>e("td",{class:"td-bold px-2"},":",-1)),Gt={class:"td-normal"},Vt={class:"col"},Bt={class:"mt-3"},Ht=l(()=>e("td",{class:"td-bold"},"CURSOS APROBADOS",-1)),jt=l(()=>e("td",{class:"td-bold px-2"},":",-1)),Xt={class:"td-normal"},$t=l(()=>e("td",{class:"td-bold"},"CRÉDITOS APROBADOS",-1)),Jt=l(()=>e("td",{class:"td-bold px-2"},":",-1)),Qt={class:"td-normal"},Zt=l(()=>e("div",{class:"row mt-3",style:{"font-size":"0.7em"}},[e("div",{class:"col-auto"},"CL: Ciclo"),e("div",{class:"col-auto"},"CR: Créditos"),e("div",{class:"col"},"TC: Tipo Curso (O=Obligatorio; E=Electivo)")],-1)),qt={__name:"MarkView",setup(b){const O="https://usefcs.unsm.edu.pe/api",E=JSON.parse(localStorage.getItem("use")),N=localStorage.getItem("student"),{personName:W,personDocument:G}=ot(O,E),{programName:D}=rt(O,E,N);let V=_(""),I=_(""),A=_([]),F=_(0),k=_(0),U=_(0),w=_(0),L=_(0);(async()=>{let s=await(await fetch(O+"/intranet/student-academic-record",{headers:{"X-Accesss-Token":E,"X-Student-Id":N}})).json();V.value=s.principalOrganicUnit.description.toUpperCase(),I.value=s.studentData.Program.Organic_unit_register.Campu.denomination.toUpperCase(),A.value=s.registration,F.value=s.registration.map(a=>a.Registration_course.length).reduce((a,o)=>a+o,0),k.value=s.registration.map(a=>a.Registration_course.reduce((o,t)=>o+t.credits,0)).reduce((a,o)=>a+o,0),U.value=(s.registration.map(a=>a.Registration_course.reduce((g,C)=>g+C.note,0)/a.Registration_course.length).reduce((a,o)=>a+o,0)/s.registration.length).toFixed(2),w.value=s.registration.map(a=>a.Registration_course.filter(o=>o.type=="Aprobado").length).reduce((a,o)=>a+o),L.value=s.registration.map(a=>a.Registration_course.filter(o=>o.type=="Aprobado").reduce((o,t)=>o+t.credits,0)).reduce((a,o)=>a+o,0)})();let B="Universidad Nacional de San Martín",H="Facultad de Ciencias de la Salud",P="Unidad de Segunda Especialidad";const j=ct,X=dt,$=d=>{let s;switch(d){case 0:s="CERO";break;case 1:s="UNO";break;case 2:s="DOS";break;case 3:s="TRES";break;case 4:s="CUATRO";break;case 5:s="CINCO";break;case 6:s="SEIS";break;case 7:s="SIETE";break;case 8:s="OCHO";break;case 9:s="NUEVE";break;case 10:s="DIEZ";break;case 11:s="ONCE";break;case 12:s="DOCE";break;case 13:s="TRECE";break;case 14:s="CATORCE";break;case 15:s="QUINCE";break;case 16:s="DIECISÉIS";break;case 17:s="DIECISIETE";break;case 18:s="DIECIOCHO";break;case 19:s="DIECINUEVE";break;case 20:s="VEINTE";break}return s};let J=d=>{let s=Math.ceil(d.registrationList.length/3);function a(r,p){let x=[];for(let u=0;u<r.length;u+=p)x.push(r.slice(u,u+p));return x}let o=a(d.registrationList,3);const t=new et;let g=t.internal.pageSize.getWidth(),C=0,S=0,R=0,v=0,y=0,T=0,z="-";const Q=()=>{t.addImage(j,"PNG",10,10,24,24),t.setFontSize(16),t.setFont("helvetica","normal"),t.text(B.toUpperCase(),g/2,16,"center"),t.setFontSize(13),t.setFont("helvetica","normal"),t.text(H.toUpperCase(),g/2,23,"center"),t.setFontSize(15),t.setFont("helvetica","normal"),t.text(P.toUpperCase(),g/2,31,"center"),t.addImage(X,"PNG",175,10,24,24),t.setFontSize(19),t.setFont("helvetica","bold"),t.text("RÉCORD ACADÉMICO",g/2,42,"center"),t.setLineWidth(.3),t.line(10,44,200,44),t.setFontSize(10),t.setFont("helvetica","bold"),t.text("PROGRAMA",10,51),t.text(":",34,51),t.setFont("helvetica","normal");let r=t.splitTextToSize(d.programName.toUpperCase(),162);t.text(r,37,51),t.setFont("helvetica","bold"),t.text("UNIDAD",10,61),t.text(":",34,61),t.setFont("helvetica","normal"),t.text(d.unityFullName.toUpperCase(),37,61),t.setFont("helvetica","bold"),t.text("SEDE",118,61),t.text(":",129,61),t.setFont("helvetica","normal"),t.text(d.sedeName,132,61),t.setFont("helvetica","bold"),t.text("ESTUDIANTE",10,66),t.text(":",34,66),t.setFont("helvetica","normal"),t.text(d.personName,37,66),t.setFont("helvetica","bold"),t.text("CÓDIGO/DNI",10,71),t.text(":",34,71),t.setFont("helvetica","normal"),t.text(d.personDocument,37,71)},Z=(r,p)=>{r.forEach(x=>{let u=[];x.Registration_course.forEach(n=>{let Y=n.type_course==="Obligatorio"?"O":"E";v=v+1,y=y+n.credits,T=T+n.note,C=n.note>=14?C+1:C,R=n.note>=14?R+n.note:R,S=n.note>=14?S+n.credits:S;let tt=$(parseInt(n.note));u.push([n.code,n.denomination,n.ciclo,"NN","",Y,n.credits,n.note,tt])}),t.setFont("helvetica","bold"),t.setTextColor(0,0,0),t.setFontSize(10),t.text("SEMESTRE",10,p-2),z=x.Academic_semester.denomination,t.text(x.Academic_semester.Academic_calendar.denomination+" - "+z,37,p-2),t.autoTable({margin:[20,10],theme:"plain",didDrawCell:function(n){t.rect(n.cell.x,n.cell.y,n.cell.width,n.cell.height)},startY:p,styles:{fontSize:7,font:"helvetica",fontStyle:"normal",cellPadding:1.3},headStyles:{font:"helvetica",fontStyle:"bold",fillColor:"#000",textColor:"#ffffff"},head:[["CÓDIGO","ASIGNATURA",{content:"CL",styles:{halign:"center"}},{content:"CV",styles:{halign:"center"}},{content:"TN",styles:{halign:"center"}},{content:"TC",styles:{halign:"center"}},{content:"CR",styles:{halign:"center"}},"NOTA","LETRA"]],columnStyles:{0:{cellWidth:23},2:{cellWidth:7,halign:"center"},3:{cellWidth:7,halign:"center"},4:{cellWidth:7,halign:"center"},5:{cellWidth:7,halign:"center"},6:{cellWidth:7,halign:"center"},7:{cellWidth:11,halign:"center"},8:{cellWidth:20}},body:u}),p=t.lastAutoTable.finalY+8})},q=()=>{t.setFont("helvetica","normal"),t.setFontSize(9),t.text("TOTAL CURSOS",10,258),t.text(":",50,258),t.text(String(v),52,258),t.text("TOTAL CRÉDITOS",10,263),t.text(":",50,263),t.text(String(y),52,263),t.text("PROMEDIO GENERAL",10,268),t.text(":",50,268),t.text(String(Math.round(T/v*100)/100),52,268),t.text("TOTAL DE CURSOS APROBADOS",120,258),t.text(":",183,258),t.text(String(C),185,258),t.text("TOTAL DE CRÉDITOS APROBADOS",120,263),t.text(":",183,263),t.text(String(S),185,263),t.setFontSize(8),t.setFont("helvetica","normal"),t.text("CL: Ciclo",10,275),t.text("CV: Curso Convalidado(C)",30,275),t.text("TN: Tipo de nota",70,275),t.text("TC: Tipo de curso(O=Obligatorio, E=Electivo)",100,275),t.text("CR: Créditos",163,275)},K=()=>{t.setTextColor(222,222,222),t.setFont("helvetica","bold"),t.setFontSize(100),t.text("SOLO",60,160,{angle:45}),t.text("LECTURA",60,200,{angle:45})};for(let r=0;r<s;r++)r>0&&t.addPage(),Q(),K(),Z(o[r],82),q(),t.setTextColor(0,0,0),t.setFont("helvetica","normal"),t.setFontSize(8),t.text("Pag "+String(r+1)+" de "+String(s),197,287,{align:"right"});t.save("RÉCORD-ACADÉMICO-"+d.personDocument+".pdf")};return(d,s)=>(h(),m(f,null,[ht,e("div",mt,[e("div",_t,[e("div",pt,[e("div",ut,[gt,e("span",{class:"cursor-pt",onClick:s[0]||(s[0]=a=>i(J)({programName:i(D),unityFullName:i(P),sedeName:i(I),personName:i(W),personDocument:i(G),registrationList:i(A)}))},[Ct,at(" DESCARGAR ")])]),e("div",xt,[e("div",bt,c(i(D)),1),e("div",St,[(h(!0),m(f,null,M(i(A),a=>(h(),m("div",{class:"col-12 mt-3",key:a.id},[vt,e("span",Ot,c(a.Academic_semester.Academic_calendar.denomination+" - "+a.Academic_semester.denomination),1),e("table",Et,[At,e("tbody",null,[(h(!0),m(f,null,M(a.Registration_course,o=>(h(),m("tr",{key:o.id},[e("td",null,c(o.code),1),e("td",null,c(o.denomination),1),e("td",null,c(o.ciclo),1),e("td",null,c(o.credits),1),e("td",null,[o.type_course=="Obligatorio"?(h(),m("span",Rt,"O")):(h(),m("span",yt,"E"))]),e("td",{class:nt({"text-danger":o.type=="Desaprobado"})},[Number(o.note)>=10?(h(),m("span",Tt,c(o.note),1)):(h(),m("span",ft,c(`0${o.note}`),1))],2)]))),128))])])]))),128))]),e("div",Nt,[e("div",Dt,[e("div",It,[e("div",Ft,[e("table",null,[e("tbody",null,[e("tr",null,[kt,Ut,e("td",wt,c(i(F)),1)]),e("tr",null,[Lt,Pt,e("td",zt,c(i(k)),1)]),e("tr",null,[Mt,Wt,e("td",Gt,c(i(U)),1)])])])])]),e("div",Vt,[e("div",Bt,[e("table",null,[e("tbody",null,[e("tr",null,[Ht,jt,e("td",Xt,c(i(w)),1)]),e("tr",null,[$t,Jt,e("td",Qt,c(i(L)),1)])])])])])]),Zt])])])])])],64))}},se=st(qt,[["__scopeId","data-v-67cd1da1"]]);export{se as default};
